# 个人记账工具 - 部署流程指南

---

## 📋 目录

1. [环境准备](#1-环境准备)
2. [GitHub 仓库创建](#2-github-仓库创建)
3. [本地项目配置](#3-本地项目配置)
4. [推送到 GitHub](#4-推送到-github)
5. [GitHub Pages 配置](#5-github-pages-配置)
6. [部署验证](#6-部署验证)
7. [常见问题与解决方案](#7-常见问题与解决方案)
8. [后续操作与维护](#8-后续操作与维护)

---

## 1. 环境准备

### 1.1 所需工具清单

在开始部署前，请确保您已准备好以下工具：

| 工具 | 用途 | 下载地址 |
|-----|------|---------|
| Git | 版本控制 | https://git-scm.com/downloads |
| GitHub 账号 | 代码托管 | https://github.com |
| 现代浏览器 | 测试应用 | Chrome / Firefox / Edge |

### 1.2 安装 Git（Windows）

#### 步骤 1：下载 Git
1. 访问 https://git-scm.com/download/win
2. 下载 Windows 版本的 Git 安装程序
3. 双击运行安装程序

#### 步骤 2：安装 Git（使用默认设置）
1. 双击安装程序，一路点击"Next"
2. 在"Choosing the default editor"步骤，选择您喜欢的编辑器（推荐 VS Code 或默认 Vim）
3. 在"Adjusting your PATH environment"，选择"Git from the command line and also from 3rd-party software"
4. 其他选项保持默认，点击"Install"完成安装

#### 步骤 3：验证 Git 安装
打开 PowerShell 或命令提示符，输入：

```bash
git --version
```

如果显示版本号（如 `git version 2.43.0`），说明安装成功。

### 1.3 配置 Git

打开 PowerShell，执行以下命令配置用户信息：

```bash
# 配置用户名（替换为您的姓名）
git config --global user.name "Your Name"

# 配置邮箱（替换为您的 GitHub 邮箱）
git config --global user.email "your.email@example.com"

# 验证配置
git config --global --list
```

---

## 2. GitHub 仓库创建

### 2.1 创建 GitHub 账号（如已有可跳过）

1. 访问 https://github.com
2. 点击右上角的"Sign up"
3. 按照提示完成注册
4. 验证邮箱

### 2.2 创建新仓库

1. 登录 GitHub 后，点击右上角的 `+` 号
2. 选择"New repository"

3. 填写仓库信息：

   - **Repository name**：输入 `checks-balances`（或您喜欢的名称）
   - **Description**：个人记账工具 - 一款功能完整的个人财务管理工具
   - **Public/Private**：选择 Public（公开）
   - **Initialize this repository with**：**不要勾选**任何选项
   - 点击"Create repository"

4. 仓库创建成功后，您会看到一个类似这样的页面，**不要关闭**，稍后会用到。

---

## 3. 本地项目配置

### 3.1 初始化 Git 仓库

打开 PowerShell，进入项目目录：

```bash
# 进入项目目录
cd c:\Users\ASUS\Desktop\checks-balances

# 初始化 Git 仓库
git init
```

### 3.2 创建 .gitignore 文件（可选但推荐）

在项目根目录创建 `.gitignore` 文件，内容如下：

```
# 操作系统文件
.DS_Store
Thumbs.db

# 编辑器目录和文件
.vscode/
.idea/
*.swp
*.swo
*~

# 日志文件
*.log
```

### 3.3 添加文件到暂存区

```bash
# 查看状态
git status

# 添加所有文件
git add .

# 再次查看状态（应该看到所有文件变绿）
git status
```

### 3.4 提交更改

```bash
# 创建第一次提交
git commit -m "Initial commit: Personal Accounting Tool v1.0.0"
```

---

## 4. 推送到 GitHub

### 4.1 关联远程仓库

回到刚才 GitHub 新建仓库的页面，复制"…or push an existing repository from the command line" 下的命令，类似：

```bash
# 关联远程仓库（替换 [username] 为您的 GitHub 用户名）
git remote add origin https://github.com/[username]/checks-balances.git

# 重命名分支为 main
git branch -M main
```

### 4.2 推送到 GitHub

```bash
# 推送到 main 分支
git push -u origin main
```

**第一次推送时**，会弹出 GitHub 登录窗口，按提示登录即可。

如果推送成功，您会看到类似这样的输出：

```
Enumerating objects: 15, done.
Counting objects: 100% (15/15), done.
Delta compression using up to 8 threads
Compressing objects: 100% (13/13), done.
Writing objects: 100% (15/15), 5.67 KiB | 5.67 MiB/s, done.
Total 15 (delta 2), reused 0 (delta 0), pack-reused 0
To https://github.com/[username]/checks-balances.git
 * [new branch]      main -> main
Branch 'main' set up to track 'origin/main'.
```

### 4.3 验证推送成功

刷新 GitHub 仓库页面，您应该能看到项目文件了！

---

## 5. GitHub Pages 配置

### 5.1 方式一：手动配置 GitHub Pages（推荐初学者）

1. 在 GitHub 仓库页面，点击顶部的 **Settings**
2. 在左侧菜单中，找到并点击 **Pages**（在 "Code and automation" 部分）
3. 在 **Build and deployment** 下：
   - **Source**：选择 `Deploy from a branch`
   - **Branch**：选择 `main`
   - **文件夹**：选择 `/ (root)`
4. 点击 **Save**

### 5.2 等待部署

保存后，页面会显示："Your site is currently being built"。

**等待 1-3 分钟**，GitHub Pages 会自动部署。

刷新页面，当看到绿色的 **✓ Your site is live** 时，部署成功！

您的应用地址类似：`https://[username].github.io/checks-balances/`

### 5.3 方式二：使用 GitHub Actions 自动部署（高级）

我们已经在项目中包含了 GitHub Actions 配置文件，您可以使用它：

1. 在 GitHub 仓库页面，点击顶部的 **Settings**
2. 在左侧菜单中，找到并点击 **Pages**
3. 在 **Build and deployment** 下：
   - **Source**：选择 `GitHub Actions`
4. 点击 **Save**

这样每次推送到 main 分支时，会自动触发部署。

---

## 6. 部署验证

### 6.1 访问应用

在浏览器中访问您的 GitHub Pages 地址：
```
https://[username].github.io/checks-balances/
```

### 6.2 功能检查清单

- [ ] 页面正常加载，无错误
- [ ] 所有文字显示正确
- [ ] 所有图标正常显示
- [ ] 点击"快速记账"按钮，弹出表单正常
- [ ] 尝试添加一笔测试支出
- [ ] 支出记录正确显示在列表中
- [ ] 点击"设置预算"按钮，弹出表单正常
- [ ] 设置预算后，预算显示正确
- [ ] 饼图和折线图正常显示
- [ ] 筛选功能正常工作
- [ ] 编辑和删除功能正常
- [ ] 刷新页面，数据不丢失
- [ ] 在浏览器控制台（F12）无错误

### 6.3 性能测试

1. 打开浏览器开发者工具（按 F12）
2. 切换到 **Performance** 标签
3. 点击录制按钮（圆形红色点）
4. 刷新页面
5. 停止录制
6. 查看首屏加载时间应该 < 2 秒

### 6.4 响应式测试

在不同设备上测试：

**PC**：
- [ ] 窗口最大化
- [ ] 窗口调整到 1024px
- [ ] 窗口调整到 768px

**手机**（或浏览器开发者工具切换到手机模式）：
- [ ] iPhone SE (375px)
- [ ] iPhone 12/13/14 (390px)
- [ ] Android (412px)

---

## 7. 常见问题与解决方案

### 7.1 Git 相关问题

**问题 1：`git remote add origin` 报错 "remote origin already exists"**

**解决方案**：
```bash
# 先移除已有的远程仓库
git remote remove origin

# 再添加新的
git remote add origin https://github.com/[username]/checks-balances.git
```

**问题 2：推送时提示认证失败**

**解决方案**：
1. 检查 GitHub 用户名和密码
2. 或者使用 Personal Access Token（推荐）
3. 在 GitHub → Settings → Developer settings → Personal access tokens → Tokens (classic)
4. 生成新 token，勾选 repo 权限
5. 推送时用 token 代替密码

**问题 3：`git push` 报错 "src refspec main does not match any"**

**解决方案**：
```bash
# 查看当前分支
git branch

# 如果不是 main，重命名
git branch -M main
```

### 7.2 GitHub Pages 相关问题

**问题 1：页面显示 404 Not Found**

**解决方案**：
1. 等待 5-10 分钟，GitHub Pages 需要时间部署
2. 确认分支选择正确（main）
3. 确认仓库设置为 Public
4. 检查 URL 是否正确（注意大小写）

**问题 2：页面样式丢失**

**解决方案**：
1. 确认 `styles.css` 文件已推送到 GitHub
2. 检查 HTML 中的 CSS 链接正确
3. 尝试清除浏览器缓存
4. 检查浏览器控制台错误

**问题 3：图表不显示**

**解决方案**：
1. 确认 Chart.js CDN 链接可访问
2. 检查浏览器控制台错误
3. 尝试使用最新版浏览器

### 7.3 应用功能问题

**问题 1：数据刷新后丢失**

**原因**：GitHub Pages 是 HTTPS，但 localStorage 是按域名存储的，刷新不影响。

**解决方案**：
1. 检查浏览器是否禁用了 localStorage
2. 检查是否在无痕模式
3. 检查浏览器控制台是否有错误

**问题 2：应用在本地正常，在线不正常**

**解决方案**：
1. 检查所有文件是否已推送
2. 检查文件路径是否正确
3. 检查浏览器控制台错误
4. 尝试使用相对路径而非绝对路径

---

## 8. 后续操作与维护

### 8.1 更新应用

当您修改了代码后，推送更新：

```bash
# 查看修改
git status

# 添加修改的文件
git add .

# 提交
git commit -m "描述您的修改"

# 推送到 GitHub
git push
```

如果使用 GitHub Actions，推送后会自动部署。

如果手动配置 GitHub Pages，等待 1-2 分钟即可看到更新。

### 8.2 版本发布

#### 创建版本标签：

```bash
# 创建标签
git tag -a v1.0.0 -m "Release v1.0.0"

# 推送标签
git push origin v1.0.0
```

#### 在 GitHub 创建 Release：

1. 在 GitHub 仓库页面，点击 **Releases**
2. 点击 **Draft a new release**
3. 选择刚才创建的标签
4. 填写发布说明
5. 点击 **Publish release**

### 8.3 回滚版本

如果新版本有问题，可以回滚：

```bash
# 查看提交历史
git log --oneline

# 找到要回滚到的提交哈希
git revert [bad-commit-hash]

# 或者重置到之前的版本
git reset --hard [good-commit-hash]
git push --force
```

⚠️ **注意**：`git push --force` 会覆盖远程历史，请谨慎使用！

### 8.4 监控和分析

虽然 v1.0 版本没有后端，但可以：
- 使用 GitHub Issues 收集反馈
- 使用 Google Analytics（可选添加）
- 定期查看仓库 Insights

---

## 🎉 恭喜！您已成功部署个人记账工具！

如有其他问题，欢迎提交 Issue！

---

**文档版本**：v1.0  
**最后更新**：2026-02-22